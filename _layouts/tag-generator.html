---
layout: post
---

<ul>
  {% for product in site.data.tags %}
    <li>{{ product.name }}</li>
    <li>{{ product.group }}
      <ol>
        {% for product in product.tags %}
          <li>{{ product.name }}</li>
          <li>{{ product.group }}
            <ol>
              {% for product in product.tags %}
                <li>{{ product.name }}</li>
              {% endfor %}
            </ol>
          </li>
        {% endfor %}
      </ol>
    </li>
  {% endfor %}
</ul>


<div class="chips">
  <div class="chip" data-category="fruit" data-value="apple">Apple</div>
  <div class="chip" data-category="fruit" data-value="banana">Banana</div>
  <div class="chip" data-category="fruit" data-value="orange">Orange</div>
</div>
<div class="chips">
  <div class="chip" data-category="transport" data-value="car">Car</div>
  <div class="chip" data-category="transport" data-value="bike">Bike</div>
  <div class="chip" data-category="transport" data-value="airplane">Airplane</div>
</div>
<div id="tagContainer"></div>
<button id="downloadButton">Download tags</button>


<script>

const container = document.getElementById("tagContainer");
const downloadButton = document.getElementById("downloadButton");
const fruitChips = document.querySelectorAll(".chips[data-category='fruit'] .chip");
const transportChips = document.querySelectorAll(".chips[data-category='transport'] .chip");
let tags = [];

function addTag(word) {
  tags.push(word);

  const tag = document.createElement("span");
  tag.innerText = word;
  tag.classList.add("tag");
  container.appendChild(tag);
  container.appendChild(document.createTextNode(", "));
}

function removeTag(word) {
  tags = tags.filter(tag => tag !== word);
  renderTags();
}

function toggleTag(word, checked) {
  if (checked) {
    addTag(word);
  } else {
    removeTag(word);
  }
}

function renderTags() {
  container.innerHTML = "";
  tags.forEach(tag => {
    const tagElement = document.createElement("span");
    tagElement.innerText = tag;
    tagElement.classList.add("tag");
    container.appendChild(tagElement);
    container.appendChild(document.createTextNode(", "));
  });
}

function downloadTags() {
  const tagString = tags.join(", ");
  const blob = new Blob([tagString], {type: "text/plain;charset=utf-8"});
  const filename = "tags.txt";
  if (window.navigator.msSaveOrOpenBlob) {
    window.navigator.msSaveBlob(blob, filename);
  } else {
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = filename;
    link.click();
    URL.revokeObjectURL(link.href);
  }
}

for (const chip of fruitChips) {
  chip.addEventListener("click", () => {
    const word = chip.getAttribute("data-value");
    toggleTag(word, chip.classList.contains("selected"));
    chip.classList.toggle("selected");
  });
}

for (const chip of transportChips) {
  chip.addEventListener("click", () => {
    const word = chip.getAttribute("data-value");
    toggleTag(word, chip.classList.contains("selected"));
    chip.classList.toggle("selected");
  });
}

downloadButton.addEventListener("click", downloadTags);

</script>