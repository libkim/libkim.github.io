---
layout: post
---

<ul>
  {% for product in site.data.tags %}
    <li>{{ product.name }}</li>
    <li>{{ product.group }}
      <ol>
        {% for product in product.tags %}
          <li>{{ product.name }}</li>
          <li>{{ product.group }}
            <ol>{% for product in product.tags %}</ol>
          </li>
        {% endfor %}
      </ol>
    </li>
  {% endfor %}
</ul>


<div id="checkboxContainer">
  {% for product in site.data.tags %}
    <input type="checkbox" id="{{ product.group | append: "Checkbox" }}" value="{{ product.group }}">
    <label for="{{ product.group | append: "Checkbox" }}">
      {{ product.group }}
    </label>
    <br>
  {% endfor %}
</div>
<div id="tagContainer"></div>
<button id="downloadButton">Download tags</button>

<script>

const container = document.getElementById("tagContainer");
const downloadButton = document.getElementById("downloadButton");
const checkboxes = document.querySelectorAll("#checkboxContainer input[type='checkbox']");
let tags = [];

for (const checkbox of checkboxes) {
  checkbox.addEventListener("change", () => {
    const word = checkbox.value;
    toggleTag(word, checkbox.checked);
  });
}

function addTag(word) {
  tags.push(word);

  const tag = document.createElement("span");
  tag.innerText = word;
  tag.classList.add("tag");
  container.appendChild(tag);
  container.appendChild(document.createTextNode(", "));
}

function removeTag(word) {
  tags = tags.filter(tag => tag !== word);
  renderTags();
}

function toggleTag(word, checked) {
  if (checked) {
    addTag(word);
  } else {
    removeTag(word);
  }
}

function renderTags() {
  container.innerHTML = "";
  tags.forEach(tag => {
    const tagElement = document.createElement("span");
    tagElement.innerText = tag;
    tagElement.classList.add("tag");
    container.appendChild(tagElement);
    container.appendChild(document.createTextNode(", "));
  });
}

function downloadTags() {
  const tagString = tags.join(", ");
  const blob = new Blob([tagString], {type: "text/plain;charset=utf-8"});
  const filename = "tags.txt";
  if (window.navigator.msSaveOrOpenBlob) {
    window.navigator.msSaveBlob(blob, filename);
  } else {
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = filename;
    link.click();
    URL.revokeObjectURL(link.href);
  }
}

downloadButton.addEventListener("click", downloadTags);

</script>