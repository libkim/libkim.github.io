---
layout: post
---

<table id="wordTable">
  <tr>
    <td>apple</td>
    <td>banana</td>
  </tr>
  <tr>
    <td>car</td>
    <td>bicycle</td>
  </tr>
</table>
<div id="tagContainer"></div>
<button id="downloadButton">Download tags</button>

<script>

  const container = document.getElementById("tagContainer");
  const downloadButton = document.getElementById("downloadButton");
  const tableCells = document.querySelectorAll("#wordTable td");
let tags = [];

  for (const cell of tableCells) {
    cell.addEventListener("click", () => {
      const word = cell.innerText.trim();
      toggleTag(word);
    });
  }

  function addTag(word) {
    tags.push(word);

    const tag = document.createElement("span");
    tag.innerText = word;
    tag.classList.add("tag");
    container.appendChild(tag);
    container.appendChild(document.createTextNode(", "));
  }

  function removeTag(word) {
    tags = tags.filter(tag => tag !== word);
    renderTags();
  }

  function toggleTag(word) {
    const index = tags.indexOf(word);
    if (index === -1) {
      addTag(word);
    } else {
      removeTag(word);
    }
  }

  function renderTags() {
    container.innerHTML = "";
    tags.forEach(tag => {
      const tagElement = document.createElement("span");
      tagElement.innerText = tag;
      tagElement.classList.add("tag");
      container.appendChild(tagElement);
      container.appendChild(document.createTextNode(", "));
    });
  }

  function downloadTags() {
    const tagString = tags.join(", ");
    const blob = new Blob([tagString], {type: "text/plain;charset=utf-8"});
    const filename = "tags.txt";
    if (window.navigator.msSaveOrOpenBlob) {
      window.navigator.msSaveBlob(blob, filename);
    } else {
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();
      URL.revokeObjectURL(link.href);
    }
  }

  downloadButton.addEventListener("click", downloadTags);

</script>